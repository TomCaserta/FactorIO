<!DOCTYPE html><html lang="en"><head ><title >Factorio API</title><meta charset="UTF-8"/><link rel="stylesheet" type="text/css" href="lua-doc.css"/></head><body ><div class="navigation-bar"><span class="version">Factorio 0.14.21</span></div><h1 >Factorio API</h1><p ></p><p >
</p>
<h2><a href="Classes.html">Classes</a></h2>
<p >
All of the API functionality is implemented via class members. To make any use of the API, therefore, you
need to have access to instances of these classes. To facilitate that, three global objects are provided:
</p><ul class="field-list"><li ><span class="param-name">game</span> :: <span class="param-type"><a href="LuaGameScript.html">LuaGameScript</a></span>:  This is the main object, through which most of the API is accessed. It is, however,
    not available inside handlers registered with <a href="LuaBootstrap.html#LuaBootstrap.on_load">LuaBootstrap::on_load</a>.</li><li ><span class="param-name">script</span> :: <span class="param-type"><a href="LuaBootstrap.html">LuaBootstrap</a></span>:  Provides an interface for registering event handlers.</li><li ><span class="param-name">remote</span> :: <span class="param-type"><a href="LuaRemote.html">LuaRemote</a></span>:  Allows inter-mod communication by way of providing a repository of interfaces that is
    shared by all mods.</li></ul><div class="example"><div class="example-header">Example</div>
  This will print the first player&#x27;s username, making use of the <a href="LuaGameScript.html#LuaGameScript.players">LuaGameScript::players</a> array
  to gain access to players&#x27; information, and <a href="LuaPlayer.html#LuaPlayer.print">LuaPlayer::print</a> to display a string in the player&#x27;s
  game console.
  <div class="block-code-container"><code class="block">  local&nbsp;first_player&nbsp;=&nbsp;game.players[1]<br/>
  first_player.print(first_player.name)</code></div>
</div><p >You can browse the <a href="Classes.html"> overview of Factorio classes</a> or view the documentation
for a particular class in the list below:</p><p ><div class="brief-listing"><table class="brief-members"><tr ><td class="header"><a href="LuaControlBehavior.html#LuaAccumulatorControlBehavior.brief">LuaAccumulatorControlBehavior</a></td><td class="description"> Control behavior for accumulators.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaArithmeticCombinatorControlBehavior.brief">LuaArithmeticCombinatorControlBehavior</a></td><td class="description"> Control behavior for arithmetic combinators.</td></tr><tr ><td class="header"><a href="LuaBootstrap.html">LuaBootstrap</a></td><td class="description"> Entry point for registering event handlers.</td></tr><tr ><td class="header"><a href="LuaChunkIterator.html">LuaChunkIterator</a></td><td class="description"> A chunk iterator can be used for iterating chunks coordinates of a surface.</td></tr><tr ><td class="header"><a href="LuaCircuitNetwork.html">LuaCircuitNetwork</a></td><td class="description"> A circuit network associated with a given entity, connector, and wire type.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaCombinatorControlBehavior.brief">LuaCombinatorControlBehavior</a></td><td class="description">
    </td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaConstantCombinatorControlBehavior.brief">LuaConstantCombinatorControlBehavior</a></td><td class="description"> Control behavior for constant combinators.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaContainerControlBehavior.brief">LuaContainerControlBehavior</a></td><td class="description"> Control behavior for container entities -- smart chests.</td></tr><tr ><td class="header"><a href="LuaControl.html">LuaControl</a></td><td class="description"> This is an abstract base class containing the common functionality between <a href="LuaPlayer.html">LuaPlayer</a> and character entities
 (see <a href="LuaEntity.html">LuaEntity</a>).</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaControlBehavior.brief">LuaControlBehavior</a></td><td class="description"> The control behavior for an entity.</td></tr><tr ><td class="header"><a href="LuaCustomTable.html">LuaCustomTable</a></td><td class="description"> Lazily evaluated table.</td></tr><tr ><td class="header"><a href="LuaDamagePrototype.html">LuaDamagePrototype</a></td><td class="description"> Prototype of a damage.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaDeciderCombinatorControlBehavior.brief">LuaDeciderCombinatorControlBehavior</a></td><td class="description"> Control behavior for decider combinators.</td></tr><tr ><td class="header"><a href="LuaEntity.html">LuaEntity</a></td><td class="description"> The primary interface for interacting with entities through the Lua API.</td></tr><tr ><td class="header"><a href="LuaEntityPrototype.html">LuaEntityPrototype</a></td><td class="description"> Prototype of an entity.</td></tr><tr ><td class="header"><a href="LuaEquipment.html">LuaEquipment</a></td><td class="description"> An item in one&#x27;s power armour.</td></tr><tr ><td class="header"><a href="LuaEquipmentGrid.html">LuaEquipmentGrid</a></td><td class="description"> An equipment grid is the inside of a power armour.</td></tr><tr ><td class="header"><a href="LuaEquipmentGridPrototype.html">LuaEquipmentGridPrototype</a></td><td class="description"> Prototype of a virtual signal.</td></tr><tr ><td class="header"><a href="LuaEquipmentPrototype.html">LuaEquipmentPrototype</a></td><td class="description"> Prototype of a modular equipment.</td></tr><tr ><td class="header"><a href="LuaFlowStatistics.html">LuaFlowStatistics</a></td><td class="description"> Encapsulates statistic data for different parts of the game.</td></tr><tr ><td class="header"><a href="LuaFluidBox.html">LuaFluidBox</a></td><td class="description"> An array of fluid boxes.</td></tr><tr ><td class="header"><a href="LuaFluidPrototype.html">LuaFluidPrototype</a></td><td class="description"> Prototype of a fluid.</td></tr><tr ><td class="header"><a href="LuaForce.html">LuaForce</a></td><td class="description"> <code >LuaForce</code> encapsulates data local to each &quot;force&quot; or &quot;faction&quot; of the game.</td></tr><tr ><td class="header"><a href="LuaGameScript.html">LuaGameScript</a></td><td class="description"> Main toplevel type, provides access to most of the API though its members.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaGenericOnOffControlBehavior.brief">LuaGenericOnOffControlBehavior</a></td><td class="description"> An abstract base class for behaviors that support switching the entity on or off based on some condition.</td></tr><tr ><td class="header"><a href="LuaGroup.html">LuaGroup</a></td><td class="description"> Item group or subgroup.</td></tr><tr ><td class="header"><a href="LuaGui.html">LuaGui</a></td><td class="description"> The root of the GUI.</td></tr><tr ><td class="header"><a href="LuaGuiElement.html">LuaGuiElement</a></td><td class="description"> An element of the custom GUI.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaInserterControlBehavior.brief">LuaInserterControlBehavior</a></td><td class="description"> Control behavior for smart inserters.</td></tr><tr ><td class="header"><a href="LuaInventory.html">LuaInventory</a></td><td class="description"> A storage of item stacks.</td></tr><tr ><td class="header"><a href="LuaItemPrototype.html">LuaItemPrototype</a></td><td class="description"> Prototype of an item.</td></tr><tr ><td class="header"><a href="LuaItemStack.html">LuaItemStack</a></td><td class="description"> An item and a count.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaLampControlBehavior.brief">LuaLampControlBehavior</a></td><td class="description"> Control behavior for lamps.</td></tr><tr ><td class="header"><a href="LuaLogisticCell.html">LuaLogisticCell</a></td><td class="description"> Logistic cell of a particular <a href="LuaEntity.html">LuaEntity</a>.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaLogisticContainerControlBehavior.brief">LuaLogisticContainerControlBehavior</a></td><td class="description"> Control behavior for logistic chests.</td></tr><tr ><td class="header"><a href="LuaLogisticNetwork.html">LuaLogisticNetwork</a></td><td class="description"> A single logistic network of a given force on a given surface.</td></tr><tr ><td class="header"><a href="LuaPlayer.html">LuaPlayer</a></td><td class="description"> A player in the game.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaRailSignalControlBehavior.brief">LuaRailSignalControlBehavior</a></td><td class="description"> Control behavior for rail signals.</td></tr><tr ><td class="header"><a href="LuaRecipe.html">LuaRecipe</a></td><td class="description"> A crafting recipe.</td></tr><tr ><td class="header"><a href="LuaRemote.html">LuaRemote</a></td><td class="description"> Registry of interfaces between scripts.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaRoboportControlBehavior.brief">LuaRoboportControlBehavior</a></td><td class="description"> Control behavior for roboports.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaStorageTankControlBehavior.brief">LuaStorageTankControlBehavior</a></td><td class="description"> Control behavior for storage tanks.</td></tr><tr ><td class="header"><a href="LuaStyle.html">LuaStyle</a></td><td class="description"> Style of a GUI element.</td></tr><tr ><td class="header"><a href="LuaSurface.html">LuaSurface</a></td><td class="description"> A &quot;domain&quot; of the world.</td></tr><tr ><td class="header"><a href="LuaTechnology.html">LuaTechnology</a></td><td class="description"> One research item.</td></tr><tr ><td class="header"><a href="LuaTile.html">LuaTile</a></td><td class="description"> A single &quot;square&quot; on the map.</td></tr><tr ><td class="header"><a href="LuaTilePrototype.html">LuaTilePrototype</a></td><td class="description"> Prototype of a tile.</td></tr><tr ><td class="header"><a href="LuaTrain.html">LuaTrain</a></td><td class="description"> A train.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaTrainStopControlBehavior.brief">LuaTrainStopControlBehavior</a></td><td class="description"> Control behavior for train stops.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaTransportBeltControlBehavior.brief">LuaTransportBeltControlBehavior</a></td><td class="description"> Control behavior for transport belts.</td></tr><tr ><td class="header"><a href="LuaTransportLine.html">LuaTransportLine</a></td><td class="description"> One line on a transport belt.</td></tr><tr ><td class="header"><a href="LuaUnitGroup.html">LuaUnitGroup</a></td><td class="description"> A collection of units moving and attacking together.</td></tr><tr ><td class="header"><a href="LuaVirtualSignalPrototype.html">LuaVirtualSignalPrototype</a></td><td class="description"> Prototype of a virtual signal.</td></tr><tr ><td class="header"><a href="LuaControlBehavior.html#LuaWallControlBehavior.brief">LuaWallControlBehavior</a></td><td class="description"> Control behavior for walls.</td></tr></table></div>
</p>
<h2><a href="events.html">Events</a></h2>
<p >
Events are delivered to mods in response to certain actions happening in the game. A mod can register
a callback for a given event, using the <a href="LuaBootstrap.html#LuaBootstrap.on_event">LuaBootstrap::on_event</a> function. Events receive a parameter that
is a table containing fields <code >name</code> and <code >tick</code> specifying the event ID (see <a href="defines.html#defines.events">defines.events</a>) and the
tick the event happened. This table may also contain additional fields that depend on the event name.</p><div class="example"><div class="example-header">Example</div>
  <div class="block-code-container"><code class="block">  script.on_event(defines.events.on_entity_died,&nbsp;function(event)<br/>
  &nbsp;&nbsp;local&nbsp;recently_deceased_entity&nbsp;=&nbsp;event.entity<br/>
  &nbsp;&nbsp;local&nbsp;time_of_death&nbsp;=&nbsp;event.tick<br/>
<br/>
  &nbsp;&nbsp;for&nbsp;_,&nbsp;player&nbsp;in&nbsp;pairs(game.players)&nbsp;do<br/>
  &nbsp;&nbsp;&nbsp;&nbsp;player.print("Let&nbsp;it&nbsp;be&nbsp;known&nbsp;that&nbsp;"&nbsp;..&nbsp;recently_deceased_entity.name&nbsp;..<br/>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;died&nbsp;a&nbsp;tragic&nbsp;death&nbsp;on&nbsp;tick&nbsp;"&nbsp;..&nbsp;time_of_death)<br/>
  &nbsp;&nbsp;end<br/>
  end)</code></div>
</div><p >Here is a complete list of Factorio events:
<div class="brief-listing"><table class="brief-members"><tr ><td class="header"><a href="events.html#All events">All events</a></td><td class="description">
 Every event contains at least the <code >name</code> and <code >tick</code> attributes.</td></tr><tr ><td class="header"><a href="events.html#on_built_entity">on_built_entity</a></td><td class="description"> Called when player builds something.</td></tr><tr ><td class="header"><a href="events.html#on_canceled_deconstruction">on_canceled_deconstruction</a></td><td class="description"> Called when the deconstruction of an entity is canceled.</td></tr><tr ><td class="header"><a href="events.html#on_chunk_generated">on_chunk_generated</a></td><td class="description"> Called when a chunk is generated.</td></tr><tr ><td class="header"><a href="events.html#on_entity_died">on_entity_died</a></td><td class="description"> Called when an entity dies.</td></tr><tr ><td class="header"><a href="events.html#on_entity_settings_pasted">on_entity_settings_pasted</a></td><td class="description"> Called after entity copy-paste is done.</td></tr><tr ><td class="header"><a href="events.html#on_force_created">on_force_created</a></td><td class="description"> Called when a new force is created using <code >game.create_force()</code>
 </td></tr><tr ><td class="header"><a href="events.html#on_forces_merging">on_forces_merging</a></td><td class="description"> Called when two forces are merged using <code >game.merge_forces()</code>.</td></tr><tr ><td class="header"><a href="events.html#on_gui_checked_state_changed">on_gui_checked_state_changed</a></td><td class="description"> Called when <a href="LuaGuiElement.html">LuaGuiElement</a> checked state is changed (related to checkboxes and radio buttons)
  </td></tr><tr ><td class="header"><a href="events.html#on_gui_click">on_gui_click</a></td><td class="description"> Called when <a href="LuaGuiElement.html">LuaGuiElement</a> is clicked.</td></tr><tr ><td class="header"><a href="events.html#on_gui_text_changed">on_gui_text_changed</a></td><td class="description"> Called when <a href="LuaGuiElement.html">LuaGuiElement</a> text is changed by the player
  </td></tr><tr ><td class="header"><a href="events.html#on_marked_for_deconstruction">on_marked_for_deconstruction</a></td><td class="description"> Called when an entity is marked for deconstruction with the Deconstruction planner or via script.</td></tr><tr ><td class="header"><a href="events.html#on_picked_up_item">on_picked_up_item</a></td><td class="description"> Called when a player picks up an item.</td></tr><tr ><td class="header"><a href="events.html#on_player_alt_selected_area">on_player_alt_selected_area</a></td><td class="description"> Called after a player alt-selects an area with a selection-tool item.</td></tr><tr ><td class="header"><a href="events.html#on_player_ammo_inventory_changed">on_player_ammo_inventory_changed</a></td><td class="description"> Called after a players ammo inventory changed in some way.</td></tr><tr ><td class="header"><a href="events.html#on_player_armor_inventory_changed">on_player_armor_inventory_changed</a></td><td class="description"> Called after a players armor inventory changed in some way.</td></tr><tr ><td class="header"><a href="events.html#on_player_built_tile">on_player_built_tile</a></td><td class="description"> Called after a player builds tiles.</td></tr><tr ><td class="header"><a href="events.html#on_player_changed_surface">on_player_changed_surface</a></td><td class="description"> Called after a player changes surfaces.</td></tr><tr ><td class="header"><a href="events.html#on_player_crafted_item">on_player_crafted_item</a></td><td class="description"> Called when the player crafts an item (upon inserting into player&#x27;s inventory, not clicking
 the button to craft).</td></tr><tr ><td class="header"><a href="events.html#on_player_created">on_player_created</a></td><td class="description"> Called after the player was created.</td></tr><tr ><td class="header"><a href="events.html#on_player_cursor_stack_changed">on_player_cursor_stack_changed</a></td><td class="description"> Called after a players cursorstack changed in some way.</td></tr><tr ><td class="header"><a href="events.html#on_player_died">on_player_died</a></td><td class="description"> Called after a player dies.</td></tr><tr ><td class="header"><a href="events.html#on_player_driving_changed_state">on_player_driving_changed_state</a></td><td class="description"> Called when the player&#x27;s driving state has changed, this means a player has either
 entered or left a vehicle.</td></tr><tr ><td class="header"><a href="events.html#on_player_gun_inventory_changed">on_player_gun_inventory_changed</a></td><td class="description"> Called after a players gun inventory changed in some way.</td></tr><tr ><td class="header"><a href="events.html#on_player_joined_game">on_player_joined_game</a></td><td class="description"> Called after a player joins the game.</td></tr><tr ><td class="header"><a href="events.html#on_player_left_game">on_player_left_game</a></td><td class="description"> Called after a player leaves the game.</td></tr><tr ><td class="header"><a href="events.html#on_player_main_inventory_changed">on_player_main_inventory_changed</a></td><td class="description"> Called after a players main inventory changed in some way.</td></tr><tr ><td class="header"><a href="events.html#on_player_mined_item">on_player_mined_item</a></td><td class="description"> Called when the player mines something.</td></tr><tr ><td class="header"><a href="events.html#on_player_mined_tile">on_player_mined_tile</a></td><td class="description"> Called after a player mines tiles.</td></tr><tr ><td class="header"><a href="events.html#on_player_placed_equipment">on_player_placed_equipment</a></td><td class="description"> Called after the player puts equipment in an equipment grid
   </td></tr><tr ><td class="header"><a href="events.html#on_player_quickbar_inventory_changed">on_player_quickbar_inventory_changed</a></td><td class="description"> Called after a players quickbar inventory changed in some way.</td></tr><tr ><td class="header"><a href="events.html#on_player_removed_equipment">on_player_removed_equipment</a></td><td class="description"> Called after the player removes equipment from an equipment grid
    </td></tr><tr ><td class="header"><a href="events.html#on_player_respawned">on_player_respawned</a></td><td class="description"> Called after a player respawns.</td></tr><tr ><td class="header"><a href="events.html#on_player_rotated_entity">on_player_rotated_entity</a></td><td class="description"> Called when the player rotates an entity (including some non-obvious rotations such as with
 the stone furnace, but not the solar-panel).</td></tr><tr ><td class="header"><a href="events.html#on_player_selected_area">on_player_selected_area</a></td><td class="description"> Called after a player selects an area with a selection-tool item.</td></tr><tr ><td class="header"><a href="events.html#on_player_tool_inventory_changed">on_player_tool_inventory_changed</a></td><td class="description"> Called after a players tool inventory changed in some way.</td></tr><tr ><td class="header"><a href="events.html#on_pre_entity_settings_pasted">on_pre_entity_settings_pasted</a></td><td class="description"> Called before entity copy-paste is done.</td></tr><tr ><td class="header"><a href="events.html#on_pre_player_died">on_pre_player_died</a></td><td class="description"> Called before a players dies.</td></tr><tr ><td class="header"><a href="events.html#on_preplayer_mined_item">on_preplayer_mined_item</a></td><td class="description"> Called when the player finishes mining an entity, before the entity is removed from map.</td></tr><tr ><td class="header"><a href="events.html#on_put_item">on_put_item</a></td><td class="description"> Called when players uses item to build something.</td></tr><tr ><td class="header"><a href="events.html#on_research_finished">on_research_finished</a></td><td class="description"> Called when a research finishes.</td></tr><tr ><td class="header"><a href="events.html#on_research_started">on_research_started</a></td><td class="description"> Called when a technology research starts.</td></tr><tr ><td class="header"><a href="events.html#on_resource_depleted">on_resource_depleted</a></td><td class="description"> Called when a resource entity reaches 0 or its minimum yield for infinite resources.</td></tr><tr ><td class="header"><a href="events.html#on_robot_built_entity">on_robot_built_entity</a></td><td class="description"> Called when a construction robot builds an entity.</td></tr><tr ><td class="header"><a href="events.html#on_robot_built_tile">on_robot_built_tile</a></td><td class="description"> Called after a robot builds tiles.</td></tr><tr ><td class="header"><a href="events.html#on_robot_mined">on_robot_mined</a></td><td class="description"> Called when a robot mines an entity.</td></tr><tr ><td class="header"><a href="events.html#on_robot_mined_tile">on_robot_mined_tile</a></td><td class="description"> Called after a robot mines tiles.</td></tr><tr ><td class="header"><a href="events.html#on_robot_pre_mined">on_robot_pre_mined</a></td><td class="description"> Called before a robot mines an entity.</td></tr><tr ><td class="header"><a href="events.html#on_rocket_launched">on_rocket_launched</a></td><td class="description"> Called when the rocket is launched.</td></tr><tr ><td class="header"><a href="events.html#on_sector_scanned">on_sector_scanned</a></td><td class="description"> Called when the radar finishes scanning a sector.</td></tr><tr ><td class="header"><a href="events.html#on_tick">on_tick</a></td><td class="description">
 It is fired once every tick.</td></tr><tr ><td class="header"><a href="events.html#on_train_changed_state">on_train_changed_state</a></td><td class="description"> Called when a train changes state (started to stopped and vice versa)
 </td></tr><tr ><td class="header"><a href="events.html#on_trigger_created_entity">on_trigger_created_entity</a></td><td class="description"> Called when an entity with a trigger prototype (such as capsules) create an entity AND that
 trigger prototype defined <code >trigger_createdentity="true"</code>.</td></tr></table></div>
</p>
<h2>Other</h2>
<p >Other parts of the API:</p><ul ><li > <a href="Concepts.html"> Concepts</a>: Lua table formats that some of the API functions expect or return. For
        example, <a href="Concepts.html#Position"> positions</a> or <a href="Concepts.html#Ingredient"> crafting ingredients</a>.</li><li > <a href="defines.html"> Defines</a>: Contents of the <code >defines</code> table, which contains symbolic constants used
        throughout the API.</li><li > <a href="Global.html"><code >global</code></a>: The <code >global</code> dictionary, useful for storing data persistent across a save-load
        cycle.</li><li > <a href="Data-Lifecycle.html"> Data Lifecycle</a>: Details about how mods are loaded and initialized.</li><li > <a href="Migrations.html"> Migrations</a>: Migrations are a way to fixup a save file which was used in an older
        version of the game or mod.</li><li > <a href="Builtin-Types.html"> Builtin types</a>: Lua builtin types.</li></ul><p ></p><div class="brief-listing"></div></body></html>